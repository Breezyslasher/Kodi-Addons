<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<addon id="plugin.audio.audiobookshelf" name="Audiobookshelf" version="1.0.6" provider-name="Breezyslasher">
	<requires>
		<import addon="xbmc.python" version="3.0.0"/>
		<import addon="script.module.requests" version="2.31.0" />
	</requires>
	<extension point="xbmc.python.pluginsource" library="default.py">
		<provides>audio</provides>
	</extension>
	<extension point="xbmc.addon.metadata">
		<summary lang="en_GB">Audiobookshelf client for Kodi</summary>
		<description lang="en_GB">Stream audiobooks and podcasts from your Audiobookshelf server. Features include:

* Stream audiobooks (M4B, MP3, multi-file)
* Stream podcasts with episode management
* Progress sync with server
* Download for offline playback
* Chapter navigation
* Resume playback
* Search and add new podcasts
* Find new episodes (from RSS)
* API Key or Username/Password authentication</description>
		<language></language>
		<platform>all</platform>
		<license>GPL-3.0-or-later</license>
		<source>https://github.com/platzregen/audiobookshelf_simpleclient</source>
		<assets>
			<icon>resources/icon.png</icon>
		</assets>
		<news>
v1.0.5 (2025-12-09) - Comprehensive Sync Overhaul
- NEW: Bidirectional sync - pulls progress from server if ahead
- NEW: Automatic sync when opening app (startup sync)
- NEW: Automatic sync when reconnecting to WiFi after offline mode
- NEW: Background sync periodically polls server for updates
- NEW: Unified progress storage for both downloaded and streamed content
- FIXED: Audiobook progress sync now works correctly
- FIXED: Chapter/multi-file audiobooks now save correct overall position
- FIXED: Clicking Chapter 2+ no longer resets progress to 0
- FIXED: file_offset properly tracked for multi-file audiobooks
- FIXED: Podcast progress sync improved
- FIXED: Duration detection issues resolved
- FIXED: Resume position now properly syncs both ways
- IMPROVED: If local progress ahead, uploads to server
- IMPROVED: If server progress ahead, downloads to local
- IMPROVED: Migrates old progress data automatically

v1.0.4 - Direct Episode Adding
- NEW: Add episodes directly from RSS without server refresh endpoint
- NEW: Click [NEW] episode to add it directly to server
- NEW: [Add All X Episodes] adds all new episodes at once
- NEW: Episodes cached locally for faster batch operations
- REMOVED: Refresh Podcast from RSS (server endpoint not available)
- FIXED: No more "Server RSS refresh not available" errors
- FIXED: Progress sync now works for both audiobooks and podcasts
- IMPROVED: Full RSS metadata captured (description, pubDate, etc.)

v1.0.3 - Progress sync overhaul
v1.0.2 - Kodi 21 DialogProgress fix
v1.0.1 - Token caching, finished threshold fix
v1.0.0 - Initial release
		</news>
	</extension>
</addon>
